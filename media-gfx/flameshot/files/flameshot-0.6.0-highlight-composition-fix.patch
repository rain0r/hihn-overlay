From a653d5a6d2b3dee58e275224e8cf789589a8b664 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Magnus=20Gro=C3=9F?= <magnus-gross@users.noreply.github.com>
Date: Wed, 13 Mar 2019 22:18:14 +0100
Subject: [PATCH] Highlight with composition mode set to Multiply (#490)

This improves readability of marked text.

Fixes #485
---
 src/tools/marker/markertool.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/tools/marker/markertool.cpp b/src/tools/marker/markertool.cpp
index 20ef933a..b444076c 100644
--- a/src/tools/marker/markertool.cpp
+++ b/src/tools/marker/markertool.cpp
@@ -58,12 +58,14 @@ void MarkerTool::process(QPainter &painter, const QPixmap &pixmap, bool recordUn
     if (recordUndo) {
         updateBackup(pixmap);
     }
+    painter.setCompositionMode(QPainter::CompositionMode_Multiply);
     painter.setOpacity(0.35);
     painter.setPen(QPen(m_color, m_thickness));
     painter.drawLine(m_points.first, m_points.second);
 }
 
 void MarkerTool::paintMousePreview(QPainter &painter, const CaptureContext &context) {
+    painter.setCompositionMode(QPainter::CompositionMode_Multiply);
     painter.setOpacity(0.35);
     painter.setPen(QPen(context.color, PADDING_VALUE + context.thickness));
     painter.drawLine(context.mousePos, context.mousePos);
